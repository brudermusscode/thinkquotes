$(function(){let e=$("body");$(document).on("click","[data-action='function:quotes,edit']",function(){var e;let t;$("response-overlay");var a=$(this).parents(1).find('[data-form="quotes,add"]').serialize()+"&categories="+categoryArray;let o=dynamicHost+"/dyn/quotes/edit";$.ajax({url:o,dataType:"text",data:a,method:"POST",success:function(a){switch(t=parseInt(a),t){case 1:e="Fill out all forms!";break;case 88:e="You can't add new authors, categories or sources!";break;case 100:e="Your quote was edited successfully!",closeOverlay(),categoryArray=[];break;default:e=randomStringArray(randomErrorTexts)}showErrorModule(e)},error:function(e){showErrorModule("Something weird happened, please try again!")}})}).on("keypress","[data-action='function:quotes,categories,add']",function(e){var t,a=e.keyCode?e.keyCode:e.which,o=$(this),r=$.trim(o.val().toLowerCase().replace(/[^a-z0-9äöüß\s]/gi,"")),s=o.parents(3).find('[data-react="function:quotes,categories,add"]');if("13"==a||"32"==a){if(-1!==$.inArray(r,categoryArray))t="You've added this category already!",showErrorModule(t);else if(""===r)t="Category can't be empty!",showErrorModule(t);else s.prepend('<div class="category-banner zoom-in mt8 lt" data-value="'+o.val()+'" style="background:var(--colour-light);">'+o.val()+' <span data-action="function:quotes,categories,remove" class="category-delete material-icons-round md-18 rt">close</span></div>'),categoryArray.push(o.val());o.val("");var i=o.val().slice(0,-1),c=$.trim(i);o.val(c)}}).on("click",'[data-action="function:quotes,categories,remove"]',function(){var e=$(this),t=e.parent().data("value");categoryArray.removeFromArray(t),e.parent().remove()}).on("click","[data-action='function:quotes,favorite']",function(){let e,t,a,o,r,s;e=$(this),$quote=e.closest("quote"),a=$quote.data("json")[0].qid,t={qid:a},o=e.closest("quote").find('[data-react="functions:quotes,favorite,count"]'),r=dynamicHost+"/do/quotes/favorite",$.ajax({url:r,data:t,method:"POST",dataType:"JSON",success:e=>{s=o.html(),e.status&&($quote.toggleClass("loved"),o.html(e.upvotes)),showErrorModule(e.message)},error:function(e){showErrorModule("Something weird happened, please try again!")}})}).on("click","[data-action='function:quotes,report']",function(){let t=$(this),a=e.find("popup-module"),o=a.find('form[data-form="quotes,report"]'),r=o.serialize(),s=dynamicHost+"/do/quotes/report";$.ajax({url:s,data:r,dataType:"JSON",method:o.attr("method"),success:a=>{a.status?(overlay=Overlay.add(e,t,!1,"1001","var(--colour-lila-200)"),setTimeout(()=>{overlay.overlay.append('<popup-module class="active"><div class="confirmation-text centered"><p>'+a.message+"</p></div></popup-module>"),setTimeout(()=>{closeOverlay(e)},1200)},600)):showErrorModule(stdErrorOutput)},error:()=>{showErrorModule("Something weird happened, please try again!")}})}).on("submit","[data-form='quotes:archive']",function(){let t,a,o,r,s;t=$(this),$appendOverlay=t.find("[data-action='quotes:archive']"),o=new FormData(this),a=dynamicHost+"/do/quotes/archive",$quote=$(document).find("quote[data-quote-id='"+o.get("qid")+"']"),$.ajax({url:a,data:o,dataType:"JSON",method:"POST",processData:!1,contentType:!1,success:t=>{t.status?(s=t.state,message="1"==s?"It's gone!":"It's back up!",r=Overlay.add(e,$appendOverlay,!1,"1001","var(--colour-lila-200)"),setTimeout(()=>{r.overlay.append('<popup-module class="active"><div class="confirmation-text centered"><p>'+message+"</p></div></popup-module>"),setTimeout(()=>{$quote.remove(),closeOverlay(e)},1200)},600)):showErrorModule(stdErrorOutput)},error:e=>{console.error(e)}})}).on("click",'[data-action="quotes:archive"]',function(){$(this).closest("[data-form='quotes:archive']").submit()})});var closeSearchType=function(){var e=$('[data-react="function:type,search"]');return e.removeClass("active").removeAttr("style").children().empty()};