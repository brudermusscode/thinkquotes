$(function(){let e,t=$("body");$(document).on("click","[data-action='popup:login']",function(o){overlay=Overlay.add(t,$(this),!1),e=dynamicHost+"/template/popups/_login",$.ajax({url:e,type:"POST",dataType:"HTML",success:function(e){setTimeout(function(){overlay.overlay.append(e)},700)},error:function(e){console.error(e)}})}).on("click","[data-action='popup:signup']",function(o){overlay=Overlay.add(t,$(this),!1),e=dynamicHost+"/template/popups/_signup",$.ajax({url:e,type:"POST",dataType:"HTML",success:function(e){setTimeout(function(){overlay.overlay.append(e)},700)},error:function(e){console.error(e)}})}).on("click","[data-action='popup:signout']",function(e){let t="Logout",o="contact_support",r="You want to go already?",a="function:sign,out",n="Yes, let me go!",s=dynamicHost+"/dyn/popups/confirmation";$.ajax({type:"POST",url:s,data:{a:t,b:o,c:r,d:a,e:n},dataType:"HTML",success:function(e){var t=randomStringArray(randomErrorTexts);if(0===parseInt(e))showErrorModule(t),window.location.replace("./404");else{addOverlay(),togglebody();var o=$(document).find("response-overlay");o.empty(),o.append(e),fitPopupModule()}},error:function(e){showErrorModule("Some random error happened, try again!")}})}).on("click",'[data-action="popup:users,friendrequests"]',function(){let e=dynamicHost+"/dyn/popups/users-friendsrequests",t=$(this);$.ajax({url:e,method:"POST",dataType:"TEXT",success:function(e){0!==parseInt(e)?(addOverlayAppendData(e),t.removeClass("hasRequest")):(togglebody(),closeOverlay(),showErrorModule("A wild error appeared! Fight it!"))},error:function(e){showErrorModule("A wild error appeared! Fight it!")}})}).on("click",'[data-action="popup:users,settings"]',function(){let e,t=dynamicHost+"/dyn/popups/users-settings";$(this);$.ajax({url:t,method:"POST",dataType:"TEXT",success:function(t){0!==parseInt(t)?(addOverlayAppendData(t),e=$(document).find("response-overlay"),e.css({background:"var(--colour-dark)"}),usersSettingsPage("privacy")):(togglebody(),closeOverlay(),showErrorModule("A wild error appeared! Fight it!"))},error:function(e){showErrorModule("A wild error appeared! Fight it!")}})}).on("click",'[data-action="users:settings,page"]',function(){let e=$(this),t=e.data("settings-page");e.hasClass("isActive")||usersSettingsPage(t)})});let addOverlayAppendData=function(e,t){let o,r=e,a=t;return console.log(a),togglebody(),addOverlay(a),o=void 0!==a?$(a).find("response-overlay"):$("body").find("response-overlay"),o.empty(),o.append(r),fitPopupModule(),!0},checkUsersSettings=function(e){let t=e,o=dynamicHost+"/dyn/quickies/check-settings.php";$.ajax({url:o,data:{action:t},dataType:"TEXT",method:"POST",success:function(e){return console.log(e),!0},error:function(e){return!1}})},usersSettingsPage=function(e){let t,o=$(document).find("response-overlay"),r=o.find('[data-react="users:settings,content"]'),a=o.find('[data-element="overlay:progress"] .progress-bar'),n=!1;switch(e){case"privacy":t="Privacy",url=dynamicHost+"/dyn/content/settings/privacy",n=!0;break;case"general":t="General",url=dynamicHost+"/dyn/content/settings/general",n=!0;break;default:closeOverlay(),showErrorModule("A wild error appeared! Fight it!")}return!!n&&($.ajax({url:url,data:e,method:"POST",dataType:"TEXT",xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;a.css({width:t+"%"})}},!1),e.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;a.css({width:t+"%"})}},!1),e},success:function(e){setTimeout(function(){a.removeAttr("style")},400),r.empty(),r.append(e)},error:function(e){closeOverlay(),showErrorModule("A wild error appeared! Fight it!")}}),t=o.find('[data-react="users:settings,page"]').html(t),!0)};