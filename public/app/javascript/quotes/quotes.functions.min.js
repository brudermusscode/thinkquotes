$(function(){let e=$("body");$(document).on("click","[data-action='function:quotes,edit']",function(){var e;let a;$("response-overlay");var t=$(this).parents(1).find('[data-form="quotes,add"]').serialize()+"&categories="+categoryArray;let o=dynamicHost+"/dyn/quotes/edit";$.ajax({url:o,dataType:"text",data:t,method:"POST",success:function(t){switch(a=parseInt(t),a){case 1:e="Fill out all forms!";break;case 88:e="You can't add new authors, categories or sources!";break;case 100:e="Your quote was edited successfully!",closeOverlay(),categoryArray=[];break;default:e=randomStringArray(randomErrorTexts)}showErrorModule(e)},error:function(e){showErrorModule("Something weird happened, please try again!")}})}).on("keypress","[data-action='function:quotes,categories,add']",function(e){var a,t=e.keyCode?e.keyCode:e.which,o=$(this),r=$.trim(o.val().toLowerCase().replace(/[^a-z0-9äöüß\s]/gi,"")),s=o.parents(3).find('[data-react="function:quotes,categories,add"]');if("13"==t||"32"==t){if(-1!==$.inArray(r,categoryArray))a="You've added this category already!",showErrorModule(a);else if(""===r)a="Category can't be empty!",showErrorModule(a);else s.prepend('<div class="category-banner zoom-in mt8 lt" data-value="'+o.val()+'" style="background:var(--colour-light);">'+o.val()+' <span data-action="function:quotes,categories,remove" class="category-delete material-icons-round md-18 rt">close</span></div>'),categoryArray.push(o.val());o.val("");var n=o.val().slice(0,-1),c=$.trim(n);o.val(c)}}).on("click",'[data-action="function:quotes,categories,remove"]',function(){var e=$(this),a=e.parent().data("value");categoryArray.removeFromArray(a),e.parent().remove()}).on("click","[data-action='function:quotes,favorite']",function(){let e,a,t,o,r,s;e=$(this),$quote=e.closest("quote"),t=$quote.data("json")[0].qid,a={qid:t},o=e.closest("quote").find('[data-react="functions:quotes,favorite,count"]'),r=dynamicHost+"/do/quotes/favorite",$.ajax({url:r,data:a,method:"POST",dataType:"JSON",success:e=>{console.log(e),s=o.html(),e.status&&($quote.toggleClass("loved"),o.html(e.upvotes)),showErrorModule(e.message)},error:function(e){showErrorModule("Something weird happened, please try again!")}})}).on("click","[data-action='function:quotes,report']",function(){var e=$(this),a=e.closest('form[data-form="quotes,report"]').serialize(),t=e.closest('form[data-form="quotes,report"]').data("json"),o=t[0].qid;let r=dynamicHost+"/dyn/quotes/report";var s=a+"&qid="+o;$.ajax({url:r,dataType:"text",data:s,method:"POST",success:function(e){console.log(e);var a,t=parseInt(e);switch(t){case 1:a="Your report has been sent!",closeOverlay();break;case 2:a="Select a report reason!";break;default:a=randomStringArray(randomErrorTexts)}showErrorModule(a)},error:function(e){showErrorModule("Something weird happened, please try again!")}})}).on("submit","[data-form='quotes:archive']",function(){let a,t,o,r,s;a=$(this),$appendOverlay=a.find("[data-action='quotes:archive']"),o=new FormData(this),t=dynamicHost+"/dyn/quotes/archive",$quote=$(document).find("quote[data-quote-id='"+o.get("qid")+"']"),$.ajax({url:t,data:o,dataType:"JSON",method:"POST",processData:!1,contentType:!1,success:a=>{a.status?(s=a.state,message="1"==s?"It's gone!":"It's back up!",r=Overlay.add(e,$appendOverlay,!1,"1001","var(--colour-lila-200)"),setTimeout(()=>{r.overlay.append('<popup-module class="active"><div class="confirmation-text centered"><p>'+message+"</p></div></popup-module>"),setTimeout(()=>{$quote.remove(),closeOverlay(e)},1200)},600)):showErrorModule(stdErrorOutput)},error:e=>{console.error(e)}})}).on("click",'[data-action="quotes:archive"]',function(){$(this).closest("[data-form='quotes:archive']").submit()})});var closeSearchType=function(){var e=$('[data-react="function:type,search"]');return e.removeClass("active").removeAttr("style").children().empty()};